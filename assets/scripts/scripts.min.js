"use strict";var axiosConfig={headers:{"x-gravitee-transaction-id":"69705fe6-8380-4886-b05f-e6838018869d"}};function loading(e){e?document.getElementById("loading").classList.add("show"):document.getElementById("loading").classList.remove("show")}function clearSelectOptions(e,t){for(var n=document.getElementById(e);n.firstChild;)n.removeChild(n.firstChild);var a=document.createElement("option"),o=document.createTextNode(t);a.appendChild(o),document.getElementById(e).appendChild(a)}function clearHTMLPlans(){for(var e=document.getElementById("plans");e.firstChild;)e.removeChild(e.firstChild)}function handleCurrentSelect(e){var t=document.getElementById(e);return t.options[t.selectedIndex].value}function handleState(e){axios.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados/".concat(e,"/municipios")).then(function(e){var t=e.data;clearSelectOptions("selectCity","Cidade"),clearSelectOptions("selectProfession","Profissão"),t.map(function(e){var t=document.createElement("option"),n=document.createTextNode(e.nome);t.value=e.nome,t.appendChild(n),document.getElementById("selectCity").appendChild(t)})})}function handleCity(){var e=handleCurrentSelect("selectState"),t=handleCurrentSelect("selectCity");axios.get("https://apisimulador.qualicorp.com.br/profissao/".concat(e,"/").concat(t,"?api-key=eebc059d-6838-4762-8e28-d2f726753866")).then(function(e){var t=e.data;clearSelectOptions("selectProfession","Profissão"),t.map(function(e){var t=document.createElement("option"),n=document.createTextNode(e.profissao);t.value=e.profissao,t.appendChild(n),document.getElementById("selectProfession").appendChild(t)})})}function getEntity(){var e=handleCurrentSelect("selectState"),t=handleCurrentSelect("selectCity"),n=handleCurrentSelect("selectProfession");axios.get("https://apisimulador.qualicorp.com.br/entidade/".concat(n,"/").concat(e,"/").concat(t,"?api-key=f1e6c49a-ca38-45d7-984a-616ff4fb458a"),axiosConfig).then(function(e){e.data.map(function(e){document.getElementById("inputEntity").value=e.NomeFantasia})})}function handleSubmit(){var e=handleCurrentSelect("selectState"),t=handleCurrentSelect("selectCity"),n=document.getElementById("inputEntity").value,a=document.getElementById("inputBirthDay").value,o=document.getElementById("inputBirthMonth").value,c=document.getElementById("inputBirthYear").value,d="".concat(c,"-").concat(o,"-").concat(a);e&&t&&n&&d?(document.getElementById("buttonSubmit").classList.add("no-click"),clearHTMLPlans(),loading(!0),axios.post("https://apisimulador.qualicorp.com.br/plano?api-key=47acfdec-048b-40a1-b826-d867199ac786",{entidade:n,uf:e,cidade:t,datanascimento:[d]},axiosConfig).then(function(e){200===e.status?(loading(!1),document.getElementById("buttonSubmit").classList.remove("no-click"),e.data.planos.map(function(e,t){var n=document.createElement("article");n.classList.add("plan"),n.setAttribute("id","id".concat(e.id).concat(t)),document.getElementById("plans").appendChild(n);var a='\n            <div>\n              <img src="'.concat(e.operadoraLogo,'" alt="').concat(e.operadora,'" />\n            </div>\n            <div class="plan__infos">\n              <h1 id="plano" class="plan__title">').concat(e.plano,'</h1>\n              <p class="tipo_acomodacao">\n                <strong>Acomodação:</strong> ').concat(e.tipo_acomodacao,'\n              </p>\n              <p class="segmentacao">\n                <strong>Segmentação:</strong> ').concat(e.segmentacao,'\n              </p>\n              <p class="abrangencia"><strong>Abrangencia:</strong> ').concat(e.abrangencia,'</p>\n              <p class="precos"><strong>R$ ').concat(e.precos.total,"</strong></p>\n              ").concat(e.precos.precos.map(function(e){return'<table class="plan__prices">\n                <tr>\n                  <th>Idade</th>\n                  <th>Preço</th>\n                  <th>Faixa</th>\n                </tr>\n                <tr>\n                  <td>'.concat(e.idade,"</td>\n                  <td>R$ ").concat(e.preco,"</td>\n                  <td>de <span>").concat(e.de,"</span> até <span>").concat(e.ate,"</span></td>\n                </tr>\n                </table>")}),"\n            </div>\n\n            ");document.getElementById("id".concat(e.id).concat(t)).innerHTML=a})):alert("Houve um problema na hora de buscar so dados, verifique todos os campos e tente novamente")}).catch(function(e){console.log(e),document.getElementById("loading").innerHTML="Houve um erro, verifique a data de nascimento e tente novamente",document.getElementById("buttonSubmit").classList.remove("no-click")})):alert("Todos os campos são obrigatórios.")}axios.get("https://servicodados.ibge.gov.br/api/v1/localidades/estados").then(function(e){e.data.map(function(e){var t=document.createElement("option"),n=document.createTextNode(e.sigla);t.value=e.sigla,t.appendChild(n),document.getElementById("selectState").appendChild(t)})});